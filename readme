

=========================<log/>=============================

2015/4/6

1.对于在web-inf下无法加载css和js的问题
解决方法一：

<script type="text/javascript" src="<%=request.getContextPath()%>/WEB-INF/js/default.js"></script>
<link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/WEB-INF/css/style.css" />

你试试，不过我记得WEB-INF下的文件，外部是不能访问的。如果不行，你就把这些文件放在webroot下，然后再用我这个方法，就ok了，
一般就是这样做的。如果不行，就把js和css文件夹拷到webroot目录下。然后

<script type="text/javascript" src="<%=request.getContextPath()%>/js/default.js"></script>
<link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/css/style.css" />



解决方法2
将css和js放到web-inf的文件外面，与web-inf文件夹同级。


2015/4/7
1.今天晚上12：00 要抢小米耳机，等等别忘了。

2.我觉得很有必要把注册页面，以及教师和管理员等模块也做出来，因为他们是一体的。

3.先做出学生模块再说，数据，一开始可以随意自己添加进去，先把学生页面的内容测试通过再说。

4.想要完成DAO层的内容，首先必须设计表结构了，首先必须完成表的设计，才行。但是，现在可以不需要完整的表，只是先测试通过再说，
而且现在完成整体表设计的布局，我觉得还是比较有难度的。先建立一个User（email，password）再说。对应数据库：linzhiOS3


5.            Query query=session.createQuery("select u.password from User u where u.username ='"+username+"'" );
能不能不写得这么丑陋的写法，我TM就是不想用这种方式写！


<done/>
    有了解决方法：
     Query query = session.createQuery("select stu.password from Student stu where stu.email =?").setString(0,email);


    another ways: expo
    (List<Manager>)getHibernateTemplate()
    			.find("from Manager m where m.name = ? and m.pass=?"
    			, mgr.getName() , mgr.getPass());



6.未知情况发生

  A valid shutdown command was received via the shutdown port. Stopping the Server instance.
  四月 07, 2015 8:37:37 下午 org.apache.coyote.AbstractProtocol pause
  信息: Pausing ProtocolHandler ["http-nio-8899"]
  四月 07, 2015 8:37:37 下午 org.apache.coyote.AbstractProtocol pause
  信息: Pausing ProtocolHandler ["ajp-nio-8009"]
  四月 07, 2015 8:37:37 下午 org.apache.catalina.core.StandardService stopInternal
  信息: Stopping service Catalina
  四月 07, 2015 8:37:37 下午 org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
  严重: The web application [] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
  四月 07, 2015 8:37:37 下午 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
  严重: The web application [] appears to have started a thread named [pool-1-thread-1] but has failed to stop it. This is very likely to create a memory leak.


7.要做一个404页面
<done/>


8.



2015/4/8
1.今天早上10：00点抢小米，要买的东西有那些：耳机X1 29   移动电源 X1  手环X1 = 29+69+79  =177 。好贵


  2299+49+49+19+29+79+79=2603

2.昨天完成了登录和注销功能，今天有两个方向可以尝试，
第一，继续完成其他功能，把那些功能，先用struts2+Hibernate 迭代的完成一遍，然后，再学习spring，再用spring+struts2+hibernate 完成。

第二，开始看spring的视频，然后完成spring的内容。

我建议做前者，因为前者的工作在学习了Spring之后还是要做，现在做了，免得到时候忘记了。

3.那么今天的任务，大致可以确定的有:

    a.把真正的数据表嫁接过来。                             <done/>

    b.checkGrade.jsp页面的成绩查询问题。                  <not yet/>

    c.chooseClass.jsp页面的功能模块。这个是真正的大问题。   <not yet/>


4.404page 做好了，现在的问题是怎么部署404页面。             <not yet/>

    测试阶段不用部署，那个ugly的异常页面有助于查看错误信息。



5.index.jsp
    ${requestScope.email}无法提取出数据。


6.新问题出现，登录，随意输入的帐号都能登录。<done/>
这个问题算是搞定了，这里面有几点学习到的经验，首先对于代码的问题，在开始视图解决的时候，看了别人的代码想把别人的粘贴过来用用，
但是效果很不好，后来解决这个问题的的时候，最终还是在手册中找到的办法，所以，如果有什么不知道的地方，我建议直接去看手册上给出的实例代码。





7.虽然今天没有完成chooseClassJsp.action的东西，但是还是有所收获，搞定了几个意料之外的bug，而且对于数据库设计上出现的小漏洞更新了设计。
最重要的是，对于HQL查询，有了一些了解，最重要的学会使用HQL进行查询：通过已知的属性，把需要的东西查出来。并且需要区分一下SQL的思维方式。


8.新问题出现，怎么将分数和课程名称关联起来？HashMap可以吗？如果可以怎么实现？



2015/4/10
四月的三分之一个月过去了，还有不到两个月的时间就得从学校滚蛋了。我一直在默念：这是他们的母校，不是我的。可是我一想到会这么失败的
从这里滚蛋，心里也很不好受。

但依然，这不是我的母校，是他们的。

接着完成这个作品吧，我想下次和老师见面的时候已经做出了点成绩。

1.关联分数和课程名，两种办法，
  第一种先用list 实现多表之间的多对多关系。
  第二种办法，hashMap，在DAO层对数据进行处理，实现课程名——分数的映射。

  还是用List吧，关于与数据库相关的数据的处理还是在最底下处理一下吧。把数据弄上来然后再处理的办法总有点……怪
  用list的话，需要处理的有Course 和Score的hbm文件。Student的hbm也要对应的改与Score相关的那一部分。


    你的数学不会比你的毛概好多少，都是在一知半解的状态中洋洋自得。


2.改为list之后，很多操作会有所不同，需要改变很多DAO层的内容

改为list后的index_S,index_C 不会自动增加？？？

绕了一圈，发现原来只要使用数据库排序就可以解决问题，所以，可以不用改成list 也不用考虑List的怎么操作。我靠！这就是典型的书读得太少，想得太多。


3.checkGrade.jsp使用了struts2标签，但是没法显示出我需要它显示的数据，原因未知？？？？？？

    是否，即便不是上面第二个问题的原因，我也依然要把set改为list，用来更好的配合输出？有必要吗？如果没有必要，我应该怎么做？

    <done/>

    没有做太大的修改，是jsp中struts2的标签没有用好，自己的问题。感谢张龙Hibernate 视频 E04

4.而现在的新问题是，怎么把课程名称和对应的成绩同时正确输出到checkGrade页面上？？？？？

    对于这个问题，我觉得可以专门设计出另一个对象，通过这个对象来读取课程名，期中成绩，期末成绩，等。
    还有一种做法，是想办法将 courseName和courseScore 关联起来，然后在只用一个iterator 来迭代出来。





2015/4/11
1.  基于map的courseName和courseScore 关联起来，然后在只用一个iterator 来迭代出来 实现了。现在总算完成了一点什么了，不易
    不过话说回来，我发现，用HQL，真的很方便就能完成数据库的操作啊

2.  接下来要做的是关于选课模块的内容了
      这部分，前端还有点儿问题，先完成前端的内容再说。

      关于前端 的那个js，在simplemodal 插件下面的传参问题，小唐给了给不错的建议，在两边都设计两个隐藏的button，然后，把需要传递的参数放在这个里面，然后用JSON来实现传参



      前端已经被我改得面目全非了，我觉得还是用Github上的那个LinzhiOS作为现在操作的基础吧，然后再把那个拿来改改看。改好了之后再移植到现在的系统上。



3.  经骆臻提醒，对登录的加密，需要用MD5实现一下对登录时候的加密。




4.  关于checkGrade页面的js的传值问题，用simplemoadl不知道怎么使用它的dataId这个属性，
    另外一种办法是通过服务器来传值，我不太想用这种办法，原因是为了这么小一件事请还去请求一次服务器，很不划算。

    有一种想法，通过使用uri来把className放到那个里面，然后再传值传过来，但是现在遇到的问题是怎么在不发生页面跳转的情况下
    把uri的值改变？

    已证明，这种方法貌似是不可能实现的。

    卒

    想别的办法.


2015/4/12
今天下午休息，现在希望自己能做出点儿事情来。

1.  考虑用服务器方法来实现传参，原因在于，这样做，太TMD方便了，就书写而言；对于性能而言，当然是很不划算的。
    可以折中一点，用$.ajax()来实现。








2015/4/13


1.  现在还有很多事情没有做，我能想到的几点，包括课表的显示的方法，怎么准确动态的显示出不同用户的不同课表信息 这个将是最主要的问题。

2.  数据在主模块和iframe模块之间的数据传递。



越发的觉得在这里呆着是浪费时间，现在想想，一个人能够有时间看书，学习代码是多么美好的一件事情。


他人即地狱。

而且还是一帮250 在旁边。

goldfish

浪费了一天时间，离从学校滚蛋已经没剩多久了.就这样一天天的浪费吗？

3.我发现我走错了方向，这里或许根本就不需要ajax来干嘛，我仅仅是想在两个也页面之间传递参数，那么为什么不直接用session呢，我在一开始
的时候就混淆了ajax的用处，所以总想着用ajax来干嘛干嘛，其实完全可以只用session就解决的问题。

那么现在的问题变成如何在javascript标签下面使用session操作，或者说，在JavaScript代码块内植入jsp代码。

仅仅是通过session貌似也不行，因为通过session也没有刷新页面，不可能局部更新null的值，所以必须需要ajax的介入。不过上述方法可尝试的
是把数据传到class的jumbotron，<p>Now Time: Monday Morning #1。</p>这个应该可以用session直接传过去，我认为，甚至不用session，
只用request就可以了。



2015/4/14

1.  试试看完成昨天晚上说的那个session完成jumbotron的内容。这种思路是行的通的

    现在的问题是，把id属性，传值到session中。

2.  从去年开始，可能那时候我还没有意识到，在大环境推进下，我已被迫进入到了高级别的战斗，而那时候的我，完全没有准备好，
    甚至完全没有意识到。

    现在开始，我，王林，要开始为高级别的战斗环境开始做准备了。

3.  我在想ajax，可不可以直接连接到action里面去，这样就可以直接绕过jsp了。



20115/4/15
1.  java.lang.ClassCastException: java.lang.String cannot be cast to linzhi.bean.ClassTime.

2.  如果说对于这个simplemodal的方法的传参数问题始终无法解决的话，我是否应该舍弃这个simplemodal的iframe框架？












=========================<done/>=============================

1.将不应该被用户看到的jsp页面放到了web-inf目录下

2.完成了对不能直接跳转的action，进行了重定向到sigin页面的定向

3.完成了数据库的移植

4.完成了基于map的checkGrade页面的版本。








=========================<todo/>=============================

1.

2.



...



n.  配置404页面

n+1.数据池的配置

n+2.MD5 密码加密